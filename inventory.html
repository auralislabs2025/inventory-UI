<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inventory - InventoryPro</title>
  <style>
    :root {
      --primary:#4361ee; --success:#06d6a0; --warning:#ff9f1c; --danger:#ef476f;
      --dark:#2c3e50; --light:#f8f9fa; --gray:#adb5bd;
    }
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#f8f9fa;color:#333;line-height:1.6}
    .app{display:flex;min-height:100vh}
    .sidebar{width:260px;background:#2c3e50;color:white;flex-shrink:0;transition:left .3s}
    .sidebar .logo{padding:20px 25px;font-size:1.6rem;font-weight:bold}
    .sidebar ul{list-style:none}
    .sidebar li a{display:block;padding:15px 25px;color:white;text-decoration:none}
    .sidebar li.active,.sidebar li:hover{background:#34495e}
    .main{flex:1;display:flex;flex-direction:column}
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:15px 30px;background:white;box-shadow:0 2px 15px rgba(0,0,0,.1);z-index:10}
    .menu-btn{background:none;border:none;font-size:1.6rem;cursor:pointer;color:#333}
    .global-search{width:380px;padding:12px 16px;border:1px solid #ddd;border-radius:8px;font-size:1rem}
    .content{flex:1;padding:30px;overflow-y:auto}
    h1{color:#2c3e50;margin-bottom:25px;font-size:1.9rem;font-weight:600}

    .page-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:25px}
    .btn{padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:500;font-size:0.95rem;transition:.2s}
    .btn-primary{background:var(--primary);color:white}
    .btn-success{background:var(--success);color:white}
    .btn-danger{background:var(--danger);color:white}
    .btn-sm{padding:6px 12px;font-size:0.85rem}

    .filters{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:20px;align-items:center}
    .filters input,.filters select{padding:12px 14px;border:1px solid #ddd;border-radius:8px;font-size:1rem}
    .search-bar{width:100%;padding:14px 16px;border:1px solid #ddd;border-radius:8px;margin-bottom:20px;font-size:1rem}

    .bulk-bar{background:#e3f2fd;padding:14px 20px;border-radius:8px;margin:20px 0;display:none;align-items:center;justify-content:space-between;box-shadow:0 2px 10px rgba(67,97,238,.1)}
    .bulk-bar.show{display:flex}

    .table-container{background:white;border-radius:12px;overflow:hidden;box-shadow:0 5px 25px rgba(0,0,0,.08);overflow-x:auto}
    table{width:100%;min-width:900px;border-collapse:collapse}
    thead{background:#f8f9fa}
    th,td{padding:16px 18px;text-align:left;border-bottom:1px solid #eee;vertical-align:middle}
    th{font-weight:600;color:#444;cursor:pointer;user-select:none;position:relative}
    th:hover{background:#f1f3f5}
    tr:hover{background:#f8f9fa}
    tr.low-stock{background:#fff8e1}
    tr.out-of-stock{background:#ffebee;color:var(--danger);font-weight:600}
    .actions button{margin:0 4px}

    .drawer{position:fixed;top:0;right:0;width:420px;height:100vh;background:white;box-shadow:-8px 0 30px rgba(0,0,0,.2);z-index:1000;transform:translateX(100%);transition:.35s;padding:0;overflow-y:auto}
    .drawer.open{transform:translateX(0)}
    .drawer-header{display:flex;justify-content:space-between;align-items:center;padding:20px 25px;border-bottom:1px solid #eee;background:#f8f9fa}
    .drawer-header h2{font-size:1.4rem;font-weight:600}
    .close-drawer{background:none;border:none;font-size:2rem;cursor:pointer;color:#999}

    .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:2000;justify-content:center;align-items:center}
    .modal.open{display:flex}
    .modal-content{background:white;padding:35px;border-radius:12px;width:90%;max-width:620px;max-height:90vh;overflow-y:auto;position:relative;box-shadow:0 20px 60px rgba(0,0,0,.3)}
    .close-modal{position:absolute;top:15px;right:20px;background:none;border:none;font-size:32px;cursor:pointer;color:#999}
    .close-modal:hover{color:#000}
    .form-group{margin-bottom:22px}
    .form-group label{display:block;margin-bottom:8px;font-weight:500;color:#444}
    .form-group input,.form-group select,.form-group textarea{width:100%;padding:12px 14px;border:1px solid #ddd;border-radius:8px;font-size:1rem}

    .toast{position:fixed;bottom:30px;right:30px;background:#333;color:white;padding:16px 28px;border-radius:8px;opacity:0;transition:.3s;z-index:3000;box-shadow:0 8px 25px rgba(0,0,0,.3);font-size:1rem}
    .toast.show{opacity:1;transform:translateY(-10px)}

    @media(max-width:768px){
      .sidebar{position:fixed;top:0;left:-260px;height:100vh;z-index:999}
      .sidebar.open{left:0}
      .topbar{flex-wrap:wrap;gap:10px}
      .global-search{width:100%}
      .page-header{flex-direction:column;align-items:stretch}
      .filters{flex-direction:column}
      .filters > *{width:100%}
    }
  </style>
</head>
<body>

<div class="app">
  <aside class="sidebar" id="sidebar">
    <div class="logo">InventoryPro</div>
    <ul>
      <li><a href="index.html">Dashboard</a></li>
      <li class="active"><a href="#">Inventory</a></li>
      <li><a href="suppliers.html">Suppliers</a></li>
      <li><a href="purchases.html">Purchases</a></li>
      <li><a href="adjustments.html">Adjustments</a></li>
      <li><a href="reports.html">Reports</a></li>
      <li><a href="settings.html">Settings</a></li>
    </ul>
  </aside>

  <div class="main">
    <header class="topbar">
      <button class="menu-btn" onclick="document.getElementById('sidebar').classList.toggle('open')">Menu</button>
      <input type="text" placeholder="Search items..." class="global-search" id="globalSearch" onkeyup="filterTable()">
      <div style="display:flex;align-items:center;gap:15px">
        <select onchange="document.body.className=this.value;localStorage.setItem('theme',this.value)">
          <option value="">Light</option>
          <option value="dark">Dark</option>
          <option value="contrast">High Contrast</option>
        </select>
        <div style="background:var(--primary);color:white;width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:bold;font-size:1.1rem">AD</div>
      </div>
    </header>

    <main class="content">
      <div class="page-header">
        <h1>Inventory Management</h1>
        <div>
          <button class="btn btn-primary" onclick="openModal('addItemModal')">+ Add Item</button>
          <button class="btn" onclick="openModal('importModal')">Import CSV</button>
          <button class="btn" onclick="openModal('bulkModal')">Bulk Actions</button>
        </div>
      </div>

      <div class="filters">
        <input type="text" placeholder="Search by name/SKU..." id="searchInput">
        <select id="categoryFilter" onchange="filterTable()">
          <option value="">All Categories</option>
          <option>Electronics</option>
          <option>Accessories</option>
          <option>Cables</option>
        </select>
        <select id="locationFilter" onchange="filterTable()">
          <option value="">All Locations</option>
          <option>Warehouse A</option>
          <option>Warehouse B</option>
        </select>
        <input type="number" placeholder="Min Qty" id="minQty" onchange="filterTable()">
        <button class="btn" onclick="clearFilters()">Clear Filters</button>
      </div>

      <div class="bulk-bar" id="bulkBar">
        <span><strong id="selectedCount">0</strong> items selected</span>
        <div>
          <button class="btn btn-sm">Export</button>
          <button class="btn btn-sm btn-success">Adjust Stock</button>
          <button class="btn btn-sm btn-danger">Delete</button>
        </div>
      </div>

      <div class="table-container">
        <table id="inventoryTable">
          <thead>
            <tr>
              <th><input type="checkbox" onclick="toggleAll(this)"></th>
              <th>SKU</th>
              <th>Name</th>
              <th>Category</th>
              <th>Qty</th>
              <th>Reorder</th>
              <th>Location</th>
              <th>Cost</th>
              <th>Value</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="inventoryBody">
            <!-- Filled by JS -->
          </tbody>
        </table>
      </div>
    </main>
  </div>

  <!-- Right Drawer -->
  <div class="drawer" id="itemDrawer">
    <div class="drawer-header">
      <h2 id="drawerTitle">Item Details</h2>
      <button class="close-drawer" onclick="closeDrawer()">X</button>
    </div>
    <div style="padding:25px" id="drawerContent">
      <!-- Filled by JS -->
    </div>
  </div>

  <!-- Modals -->
  <div class="modal" id="addItemModal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal()">X</button>
      <h2>Add New Item</h2>
      <form onsubmit="addItem(this);return false;">
        <div class="form-group"><label>SKU</label><input type="text" required></div>
        <div class="form-group"><label>Name</label><input type="text" required></div>
        <div class="form-group"><label>Category</label><select><option>Electronics</option><option>Accessories</option></select></div>
        <div class="form-group"><label>Quantity</label><input type="number" value="0"></div>
        <div class="form-group"><label>Unit Cost</label><input type="number" step="0.01"></div>
        <div class="form-group"><label>Location</label><select><option>Warehouse A</option><option>Warehouse B</option></select></div>
        <button type="submit" class="btn btn-primary">Save Item</button>
      </form>
    </div>
  </div>

  <div class="modal" id="importModal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal()">X</button>
      <h2>Import CSV</h2>
      <input type="file" accept=".csv"><br><br>
      <button class="btn btn-success" onclick="showToast('48 items imported!');closeModal()">Import Now</button>
    </div>
  </div>

  <div class="modal" id="bulkModal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeModal()">X</button>
      <h2>Bulk Actions</h2>
      <p>Apply to <strong>12</strong> selected items:</p>
      <div class="form-group"><input type="number" placeholder="+/- Quantity"></div>
      <select><option>Restock</option><option>Damage</option></select>
      <button class="btn btn-success">Apply to All</button>
    </div>
  </div>

  <div id="toast" class="toast"></div>
</div>

<script>
  // Sample data
  let inventory = JSON.parse(localStorage.getItem('inventory') || '[]');
  if(inventory.length===0){
    inventory = [
      {sku:"SKU-001",name:"Laptop Dell XPS",category:"Electronics",qty:8,reorder:20,location:"Warehouse A",cost:999.99},
      {sku:"SKU-002",name:"Wireless Mouse",category:"Accessories",qty:0,reorder:50,location:"Warehouse B",cost:24.99},
      {sku:"SKU-003",name:"USB-C Hub",category:"Accessories",qty:87,reorder:30,location:"Warehouse A",cost:45.00},
      {sku:"SKU-004",name:"Mechanical Keyboard",category:"Electronics",qty:33,reorder:25,location:"Warehouse A",cost:129.99}
    ];
    localStorage.setItem('inventory',JSON.stringify(inventory));
  }

  function renderTable(){
    const tbody = document.getElementById('inventoryBody');
    tbody.innerHTML = inventory.map(item=>`
      <tr class="${item.qty===0?'out-of-stock':item.qty<item.reorder?'low-stock':''}">
        <td><input type="checkbox" class="row-check" onchange="updateBulk()"></td>
        <td><strong>${item.sku}</strong></td>
        <td>${item.name}</td>
        <td>${item.category}</td>
        <td>${item.qty}</td>
        <td>${item.reorder}</td>
        <td>${item.location}</td>
        <td>$${item.cost.toFixed(2)}</td>
        <td>$${(item.qty*item.cost).toFixed(2)}</td>
        <td>
          <button class="btn btn-sm btn-primary" onclick="openDrawer('${item.sku}')">View</button>
          <button class="btn btn-sm">Edit</button>
          <button class="btn btn-sm btn-success">Adjust</button>
          <button class="btn btn-sm">History</button>
        </td>
      </tr>
    `).join('');
  }

  function openDrawer(sku){
    const item = inventory.find(i=>i.sku===sku);
    document.getElementById('drawerTitle').textContent = item.name;
    document.getElementById('drawerContent').innerHTML = `
      <p><strong>SKU:</strong> ${item.sku}</p>
      <p><strong>Category:</strong> ${item.category}</p>
      <p><strong>Location:</strong> ${item.location}</p>
      <p><strong>Current Stock:</strong> ${item.qty}</p>
      <p><strong>Unit Cost:</strong> $${item.cost.toFixed(2)}</p>
      <p><strong>Total Value:</strong> $${(item.qty*item.cost).toFixed(2)}</p>
      <h4 style="margin:25px 0 15px">Quick Adjust</h4>
      <input type="number" placeholder="+/- Qty" style="width:120px;padding:10px">
      <select style="padding:10px;margin-left:10px"><option>Restock</option><option>Damage</option></select>
      <button class="btn btn-success" style="margin-left:10px" onclick="showToast('Stock adjusted')">Apply</button>
    `;
    document.getElementById('itemDrawer').classList.add('open');
  }

  function closeDrawer(){document.getElementById('itemDrawer').classList.remove('open')}

  function openModal(id){document.getElementById(id).classList.add('open')}
  function closeModal(){document.querySelectorAll('.modal').forEach(m=>m.classList.remove('open'))}

  function filterTable(){
    const term=document.getElementById('searchInput').value.toLowerCase();
    const cat=document.getElementById('categoryFilter').value;
    const loc=document.getElementById('locationFilter').value;
    const min=parseInt(document.getElementById('minQty').value)||0;
    document.querySelectorAll('#inventoryBody tr').forEach(row=>{
      const text=row.textContent.toLowerCase();
      const qty=parseInt(row.cells[4].textContent);
      const rowCat=row.cells[3].textContent;
      const rowLoc=row.cells[6].textContent;
      const match = text.includes(term) && (cat===''||rowCat===cat) && (loc===''||rowLoc===loc) && qty>=min;
      row.style.display = match?'':'none';
    });
  }

  function clearFilters(){
    document.getElementById('searchInput').value='';
    document.getElementById('categoryFilter').value='';
    document.getElementById('locationFilter').value='';
    document.getElementById('minQty').value='';
    filterTable();
  }

  function updateBulk(){
    const checked=document.querySelectorAll('.row-check:checked').length;
    document.getElementById('selectedCount').textContent=checked;
    document.getElementById('bulkBar').classList.toggle('show',checked>0);
  }

  function toggleAll(cb){
    document.querySelectorAll('.row-check').forEach(c=>c.checked=cb.checked);
    updateBulk();
  }

  function addItem(form){
    const newItem = {
      sku:form.querySelector('input[placeholder="e.g. SKU-001"]').value||'NEW-'+Date.now(),
      name:form.querySelector('input[placeholder="Item name"]').value,
      category:form.querySelector('select').value,
      qty:parseInt(form.querySelector('input[type="number"]').value)||0,
      reorder:20,
      location:form.querySelectorAll('select')[1].value,
      cost:parseFloat(form.querySelector('input[step="0.01"]').value)||0
    };
    inventory.push(newItem);
    localStorage.setItem('inventory',JSON.stringify(inventory));
    renderTable();
    showToast('Item added!');
    closeModal();
  }

  function showToast(msg){
    const t=document.getElementById('toast');
    t.textContent=msg;
    t.classList.add('show');
    setTimeout(()=>t.classList.remove('show'),3000);
  }

  // Close modal on outside click
  document.querySelectorAll('.modal').forEach(m=>m.addEventListener('click',e=>{if(e.target===m)closeModal();}));

  // Apply saved theme
  document.body.className = localStorage.getItem('theme')||'';

  renderTable();
</script>
</body>
</html>